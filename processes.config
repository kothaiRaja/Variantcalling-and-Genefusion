// Process Configurations


// ========================== Process Configuration ==========================
process {
    executor = 'local'
    cpus = 4
    memory = '16 GB'
    time = '4h'


         

    withName: 'CONCAT_FASTQ' {
        cpus = 2
        memory = '4 GB'
        time = '1h'
        errorStrategy = 'retry'
        maxRetries = 1
    }

    withName: 'FASTQC_RAW' {
        cpus = 2
        memory = '4 GB'
        time = '1h'
        errorStrategy = 'retry'
        maxRetries = 1
    }

    withName: 'TRIM_READS' {
        cpus = 4
        memory = '8 GB'
        time = '2h'
        errorStrategy = 'retry'
        maxRetries = 2
    }

    withName: 'STAR_ALIGNMENT' {
        cpus = params.get('star_cpus', 12)
        memory = params.get('star_memory', '48 GB')
        time = params.get('star_time', '5h')          
        errorStrategy = 'retry'
        maxRetries = 2
    }

    withName: 'SAMTOOLS_SORT_INDEX' {
        cpus = 6
        memory = '16 GB'
        time = '2h'
        errorStrategy = 'retry'
        maxRetries = 2
    }

    withName: 'SAMTOOLS_FILTER_ORPHANS' {
        cpus = 4
        memory = '8 GB'
        time = '1h'
    }

    withName: 'SAMTOOLS_FLAGSTAT' {
        cpus = 2
        memory = '4 GB'
        time = '30m'
    }

    withName: 'GATK_MARK_DUPLICATES' {
        cpus = 8
        memory = '24 GB'
        time = '3h'
        errorStrategy = 'retry'
        maxRetries = 2
    }

    withName: 'SPLIT_NCIGAR_READS' {
        cpus = 8
        memory = '24 GB'
        time = '3h'
        errorStrategy = 'retry'
        maxRetries = 2
    }

    withName: 'SAMTOOLS_CALMD' {
        cpus = 6
        memory = '16 GB'
        time = '2h'
    }

    withName: 'GATK_RECALIBRATION' {
        cpus = 8
        memory = '32 GB'
        time = '5h'
        errorStrategy = 'retry'
        maxRetries = 2
    }

    withName: 'GATK_HAPLOTYPE_CALLER' {
        cpus = params.get('gatk_cpus', 12)
        memory = params.get('gatk_memory', '64 GB')
        time = params.get('gatk_time', '8h')                 
        errorStrategy = 'retry'
        maxRetries = 3
    }

    withName: 'GATK_VARIANT_FILTER' {
        cpus = params.get('variant_filter_cpus', 8)
        memory = params.get('variant_filter_memory', '24 GB')
        time = params.get('variant_filter_time', '3h')
        errorStrategy = 'retry'
        maxRetries = 2
    }


    withName: 'STAR_ALIGN_FUSION' {
        cpus = params.get('star_fusion_cpus', 12)
        memory = params.get('star_fusion_memory', '48 GB')
        time = params.get('star_fusion_time', '5h')
    }

    withName: 'ARRIBA' {
        cpus = params.get('arriba_cpus', 12)
        memory = params.get('arriba_memory', '48 GB')
        time = params.get('arriba_time', '5h')
    }

    withName: 'ARRIBA_VISUALIZATION' {
        cpus = params.get('arriba_visualization_cpus', 4)
        memory = params.get('arriba_visualization_memory', '16 GB')
        time = params.get('arriba_visualization_time', '2h')
    }
}

